(self.webpackChunkaa_webauthn_demo=self.webpackChunkaa_webauthn_demo||[]).push([[615],{75439:(e,t,a)=>{"use strict";a.d(t,{M:()=>r});var n=a(56816),s=a(80184);const r=e=>{let{buttonText:t,onClick:a,disabled:r=!1,testId:i="",loading:o=!1,sx:l}=e;return(0,s.jsx)(n.Z,{size:"small",variant:"contained",sx:{...l,backgroundColor:"black",borderRadius:2},onClick:a,disabled:r,"data-testid":i,loading:o,children:t})}},96698:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>w});var n=a(72791),s=a(77257),r=a(57621),i=a(39504),o=a(20890),l=a(72363),c=a(42139),d=a(50533),u=a(49673),h=a(87499),g=a(17303),p=a(2257),f=a(75439),b=a(95400),x=a(98402),y=a(70188),m=a(80184);const w=(0,s.Pi)((()=>{const{appStore:e}=(0,b.oR)(),t=e.accountAddress,[a,s]=(0,n.useState)(!1),[w,v]=(0,n.useState)(""),[k,B]=(0,n.useState)(0);return t?(0,m.jsx)(m.Fragment,{children:(0,m.jsxs)(r.Z,{variant:"outlined",sx:{minWidth:275,borderRadius:5},children:[(0,m.jsx)(i.Z,{sx:{pb:1},children:(0,m.jsx)(o.Z,{display:"inline",sx:{fontSize:26},children:"Send Transaction"})}),(0,m.jsxs)(l.Z,{sx:{pl:2,pr:2,pb:2},children:[(0,m.jsx)(c.Z,{id:"address",label:"Address",variant:"filled",onChange:e=>{v(e.target.value)}}),(0,m.jsx)(c.Z,{id:"value",label:"Value",variant:"filled",onChange:e=>{B(e.target.value)}}),(0,m.jsx)(f.M,{buttonText:"Send Transaction",sx:{ml:1},onClick:()=>(async t=>{let{target:a,value:n}=t;e.accountAddress||(e.snackBarMessage="Please create account first",e.openSnackBar=!0);try{s(!0);const t=new x.A(e.transports,y.cc,e.createCredential,e.publicKey),a=await u.Client.init(y.Bp,{entryPoint:y.m$,overrideBundlerRpc:y.kK}),r=await h.SmartAccount.init(t,y.Bp,{overrideBundlerRpc:y.kK,entryPoint:y.m$,factory:y.BJ,paymasterMiddleware:u.Presets.Middleware.verifyingPaymaster(y.RZ,{type:"payg"})});console.log("accountBuilder",r),new g.vU(["function withdrawTo(address,uint256)"]);const i=p.O$.from(n.toString()),o=p.O$.from(10).pow(18),l=(i.mul(o),"0x095ea7b300000000000000000000000025e9548418c36f220d1d418f8503a1a4cea8e8f500000000000000000000000000000000000000000000001b1ae4d6e2ef500000");r.setCallData(l);const c=await a.sendUserOperation(r);e.transactions.push({txHash:c.userOpHash});const d=await c.wait();console.log("userOperationEvent",d),d&&(e.snackBarMessage="Account created successfully!",e.openSnackBar=!0)}catch(r){console.error(r),e.snackBarMessage=`${r.toString()}`,e.openSnackBar=!0}finally{s(!1)}})({target:w,value:1e3*k}),testId:"send-transaction",loading:a})]}),e.transactions.map(((t,a)=>(0,m.jsx)(i.Z,{sx:{pb:1},children:t.txHash&&(0,m.jsxs)(o.Z,{sx:{fontSize:16},children:["Transaction Details: ",(0,m.jsx)(d.Z,{underline:"always",target:"_blank",rel:"noopener",href:`https://dashboard.tenderly.co/tx/sepolia/${t.txHash}?trace=0`,children:e.createAccountTxHash})]})},a)))]})}):null}))},98402:(e,t,a)=>{"use strict";a.d(t,{A:()=>c});var n=a(2257),s=a(73580),r=a(19967),i=a(51063),o=a(36411),l=a(19778).Buffer;class c{constructor(e,t,a,n){this.transports=e,this.addr=t,this.credential=a,this.publicKey=n}signatureLength(){return 1280}address(){return this.addr}async data(){const e=await(0,i.pJ)(this.publicKey);console.log("jwk",e);const t=l.from(r.P6.parseBase64url(e.x.toString())),a=l.from(r.P6.parseBase64url(e.y.toString()));return s.defaultAbiCoder.encode(["uint256","uint256"],[n.O$.from(t),n.O$.from(a)])}shouldRemoveLeadingZero(e){return 0===e[0]&&0!==(128&e[1])}async sign(e){const t=r.P6.toBase64url((0,s.arrayify)(e)).replace(/=/g,"");console.log("challenge",t),console.log("create credential",this.credential);const a=r.P6.parseBase64url(t),l=await(0,o.YR)(a,this.credential.rawId,this.transports);console.log("get credential",l.credential);const c=(new TextDecoder).decode(r.P6.parseBase64url(r.P6.toBase64url(l.credential.clientDataJSON))),d=c.indexOf(t),u=c.substring(0,d),h=c.substring(d+t.length),g=new Uint8Array(l.credential.authenticatorData),p=(0,i.bL)(l.credential.signature);let f=p.r,b=p.s;this.shouldRemoveLeadingZero(f)&&(f=f.slice(1)),this.shouldRemoveLeadingZero(b)&&(b=b.slice(1));const x=s.defaultAbiCoder.encode(["uint256","uint256"],[n.O$.from(f),n.O$.from(b)]);return console.log(x,g,u,h),s.defaultAbiCoder.encode(["bytes","bytes","string","string"],[x,g,u,h])}}},46601:()=>{},89214:()=>{},8623:()=>{},7748:()=>{},85568:()=>{},56619:()=>{},83736:()=>{},77108:()=>{},52361:()=>{},94616:()=>{}}]);
//# sourceMappingURL=615.d18cc82d.chunk.js.map