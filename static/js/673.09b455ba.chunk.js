"use strict";(self.webpackChunkaa_webauthn_demo=self.webpackChunkaa_webauthn_demo||[]).push([[673],{75439:(e,n,o)=>{o.d(n,{M:()=>t});var s=o(56816),a=o(80184);const t=e=>{let{buttonText:n,onClick:o,disabled:t=!1,testId:r="",loading:c=!1,sx:l}=e;return(0,a.jsx)(s.Z,{size:"small",variant:"contained",sx:{...l,backgroundColor:"black",borderRadius:2},onClick:o,disabled:t,"data-testid":r,loading:c,children:n})}},52673:(e,n,o)=>{o.r(n),o.d(n,{default:()=>y});var s=o(72791),a=o(77257),t=o(57621),r=o(39504),c=o(20890),l=o(72363),i=o(34029),d=o(2257),u=o(65054),b=o(73580),m=o(19967),p=o(75439),h=o(52029),x=o(70188),f=o(80184),g=o(19778).Buffer;const y=(0,a.Pi)((()=>{const{appStore:e}=(0,h.oR)(),n=e.recoveryEmail,[o,a]=(0,s.useState)(!1);return n?(0,f.jsx)(f.Fragment,{children:(0,f.jsxs)(t.Z,{variant:"outlined",sx:{minWidth:275,borderRadius:5},children:[(0,f.jsx)(r.Z,{sx:{pb:1},children:(0,f.jsx)(c.Z,{display:"inline",sx:{fontSize:26},children:"Send Recovery Email"})}),(0,f.jsx)(l.Z,{sx:{pl:2,pr:2,pb:2},children:(0,f.jsx)(p.M,{buttonText:"Send Recovery Email",sx:{ml:1},onClick:async()=>{n||e.showSnackBar("Please add recovery email first");try{a(!0);const n=new i.CH(x.cc,x.k9,e.provider);console.log("webAuthn contract",n);const o=await n.emails(e.accountAddress);console.log("email",o);const s=await n.recoveryNonce(e.accountAddress);console.log("nonce",d.O$.from(s).toNumber()),console.log("passkeyId",e.createCredentialId);const t=await n.publicKeys(e.accountAddress,e.createCredentialId);console.log("publicKey",t);const r=g.from(m.P6.parseBase64url(e.publicKey.x.toString())),c=g.from(m.P6.parseBase64url(e.publicKey.y.toString())),l=b.defaultAbiCoder.encode(["uint256","uint256"],[d.O$.from(r),d.O$.from(c)]),p=u.$.encode(["uint256","address","address","uint256","bytes","string"],[x.Bv,x.cc,e.accountAddress,s,l,e.createCredentialId]),h=x.pC;window.open(`https://mail.google.com/mail/u/1/?view=cm&fs=1&tf=1&to=${h}&su=${p.slice(2)}`,"_blank")}catch(o){console.error(o),e.showSnackBar(`${o.toString()}`)}finally{a(!1)}},testId:"send-email",loading:o})})]})}):null}))}}]);
//# sourceMappingURL=673.09b455ba.chunk.js.map