(self.webpackChunkaa_webauthn_demo=self.webpackChunkaa_webauthn_demo||[]).push([[918],{75439:(e,t,n)=>{"use strict";n.d(t,{M:()=>r});var a=n(56816),s=n(80184);const r=e=>{let{buttonText:t,onClick:n,disabled:r=!1,testId:i="",loading:o=!1,sx:c}=e;return(0,s.jsx)(a.Z,{size:"small",variant:"contained",sx:{...c,backgroundColor:"black",borderRadius:2},onClick:n,disabled:r,"data-testid":i,loading:o,children:t})}},71608:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>y});var a=n(72791),s=n(77257),r=n(57621),i=n(39504),o=n(20890),c=n(72363),l=n(50533),d=n(49673),u=n(87499),h=n(17303),p=n(75439),g=n(95400),x=n(98402),b=n(70188),f=n(80184);const y=(0,s.Pi)((()=>{const{appStore:e}=(0,g.oR)(),t=e.accountAddress,[n,s]=(0,a.useState)(!1);return t?(0,f.jsx)(f.Fragment,{children:(0,f.jsxs)(r.Z,{variant:"outlined",sx:{minWidth:275,borderRadius:5},children:[(0,f.jsx)(i.Z,{sx:{pb:1},children:(0,f.jsx)(o.Z,{display:"inline",sx:{fontSize:26},children:"Mint NFT"})}),(0,f.jsx)(c.Z,{sx:{pl:2,pr:2,pb:2},children:(0,f.jsx)(p.M,{buttonText:"Mint NFT",sx:{ml:1},onClick:async()=>{e.accountAddress||(e.snackBarMessage="Please create account first",e.openSnackBar=!0);try{s(!0);const t=new x.A(e.transports,b.cc,e.createCredential,e.publicKey),n=await d.Client.init(b.Bp,{entryPoint:b.m$,overrideBundlerRpc:b.kK}),a=await u.SmartAccount.init(t,b.Bp,{overrideBundlerRpc:b.kK,entryPoint:b.m$,factory:b.BJ,paymasterMiddleware:d.Presets.Middleware.verifyingPaymaster(b.RZ,{type:"payg"})});console.log("accountBuilder",a);const r=new h.vU(["function execute(address,uint256,bytes)"]).encodeFunctionData("execute",[b._S,0,"0x1249c58b"]);a.setCallData(r);const i=await n.sendUserOperation(a);e.nftTransactions.push({txHash:i.userOpHash})}catch(t){console.error(t),e.snackBarMessage=`${t.toString()}`,e.openSnackBar=!0}finally{s(!1)}},testId:"mint-NFT",loading:n})}),e.nftTransactions.map(((e,t)=>(0,f.jsx)(i.Z,{sx:{pb:1},children:e.txHash&&(0,f.jsxs)(o.Z,{sx:{fontSize:16},children:["Transaction Details: ",(0,f.jsx)(l.Z,{underline:"always",target:"_blank",rel:"noopener",href:`https://dashboard.tenderly.co/tx/sepolia/${e.txHash}?trace=0`,children:e.txHash})]})},t)))]})}):null}))},98402:(e,t,n)=>{"use strict";n.d(t,{A:()=>l});var a=n(2257),s=n(73580),r=n(19967),i=n(51063),o=n(36411),c=n(19778).Buffer;class l{constructor(e,t,n,a){this.transports=e,this.addr=t,this.credential=n,this.publicKey=a}signatureLength(){return 1280}address(){return this.addr}async data(){const e=await(0,i.pJ)(this.publicKey);console.log("jwk",e);const t=c.from(r.P6.parseBase64url(e.x.toString())),n=c.from(r.P6.parseBase64url(e.y.toString()));return s.defaultAbiCoder.encode(["uint256","uint256"],[a.O$.from(t),a.O$.from(n)])}shouldRemoveLeadingZero(e){return 0===e[0]&&0!==(128&e[1])}async sign(e){const t=r.P6.toBase64url((0,s.arrayify)(e)).replace(/=/g,"");console.log("challenge",t),console.log("create credential",this.credential);const n=r.P6.parseBase64url(t),c=await(0,o.YR)(n,this.credential.rawId,this.transports);console.log("get credential",c.credential);const l=(new TextDecoder).decode(r.P6.parseBase64url(r.P6.toBase64url(c.credential.clientDataJSON))),d=l.indexOf(t),u=l.substring(0,d),h=l.substring(d+t.length),p=new Uint8Array(c.credential.authenticatorData),g=(0,i.bL)(c.credential.signature);let x=g.r,b=g.s;this.shouldRemoveLeadingZero(x)&&(x=x.slice(1)),this.shouldRemoveLeadingZero(b)&&(b=b.slice(1));const f=s.defaultAbiCoder.encode(["uint256","uint256"],[a.O$.from(x),a.O$.from(b)]);return console.log(f,p,u,h),s.defaultAbiCoder.encode(["bytes","bytes","string","string"],[f,p,u,h])}}},46601:()=>{},89214:()=>{},8623:()=>{},7748:()=>{},85568:()=>{},56619:()=>{},83736:()=>{},77108:()=>{},52361:()=>{},94616:()=>{}}]);
//# sourceMappingURL=918.33a0b94f.chunk.js.map