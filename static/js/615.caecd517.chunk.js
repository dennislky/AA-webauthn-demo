(self.webpackChunkaa_webauthn_demo=self.webpackChunkaa_webauthn_demo||[]).push([[615],{75439:(e,t,a)=>{"use strict";a.d(t,{M:()=>s});var n=a(56816),r=a(80184);const s=e=>{let{buttonText:t,onClick:a,disabled:s=!1,testId:i="",loading:o=!1,sx:l}=e;return(0,r.jsx)(n.Z,{size:"small",variant:"contained",sx:{...l,backgroundColor:"black",borderRadius:2},onClick:a,disabled:s,"data-testid":i,loading:o,children:t})}},96698:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>w});var n=a(72791),r=a(77257),s=a(57621),i=a(39504),o=a(20890),l=a(72363),d=a(42139),c=a(50533),u=a(49673),h=a(87499),g=a(2257),p=a(17303),x=a(75439),b=a(95400),f=a(98402),y=a(70188),m=a(80184);const w=(0,r.Pi)((()=>{const{appStore:e}=(0,b.oR)(),t=e.accountAddress,[a,r]=(0,n.useState)(!1),[w,v]=(0,n.useState)(""),[k,B]=(0,n.useState)(0);return t?(0,m.jsx)(m.Fragment,{children:(0,m.jsxs)(s.Z,{variant:"outlined",sx:{minWidth:275,borderRadius:5},children:[(0,m.jsx)(i.Z,{sx:{pb:1},children:(0,m.jsx)(o.Z,{display:"inline",sx:{fontSize:26},children:"Send Transaction"})}),(0,m.jsxs)(l.Z,{sx:{pl:2,pr:2,pb:2},children:[(0,m.jsx)(d.Z,{id:"address",label:"Address",variant:"filled",onChange:e=>{v(e.target.value)}}),(0,m.jsx)(d.Z,{id:"value",label:"Value",variant:"filled",onChange:e=>{B(e.target.value)}}),(0,m.jsx)(x.M,{buttonText:"Send Transaction",sx:{ml:1},onClick:()=>(async t=>{let{target:a,value:n}=t;e.accountAddress||(e.snackBarMessage="Please create account first",e.openSnackBar=!0);try{r(!0);const t=new f.A(e.transports,y.cc,e.createCredential,e.publicKey),s=await u.Client.init(y.Bp,{entryPoint:y.m$,overrideBundlerRpc:y.kK}),i=await h.SmartAccount.init(t,y.Bp,{overrideBundlerRpc:y.kK,entryPoint:y.m$,factory:y.BJ,paymasterMiddleware:u.Presets.Middleware.verifyingPaymaster(y.RZ,{type:"payg"})});console.log("accountBuilder",i);const o=g.O$.from(n.toString()),l=g.O$.from(10).pow(18),d=o.mul(l),c=new p.vU(["function withdrawTo(address,uint256)"]).encodeFunctionData("withdrawTo",[a,d.toString()]),x=new p.vU(["function execute(address,uint256,bytes)"]).encodeFunctionData("execute",["0x22C1317FE43132b22860e8b465548613d6151a9F",0,c]);i.setCallData(x);const b=await s.sendUserOperation(i);e.transactions.push({txHash:b.userOpHash})}catch(s){console.error(s),e.snackBarMessage=`${s.toString()}`,e.openSnackBar=!0}finally{r(!1)}})({target:w,value:1e3*k}),testId:"send-transaction",loading:a})]}),e.transactions.map(((e,t)=>(0,m.jsx)(i.Z,{sx:{pb:1},children:e.txHash&&(0,m.jsxs)(o.Z,{sx:{fontSize:16},children:["Transaction Details: ",(0,m.jsx)(c.Z,{underline:"always",target:"_blank",rel:"noopener",href:`https://dashboard.tenderly.co/tx/sepolia/${e.txHash}?trace=0`,children:e.txHash})]})},t)))]})}):null}))},98402:(e,t,a)=>{"use strict";a.d(t,{A:()=>d});var n=a(2257),r=a(73580),s=a(19967),i=a(51063),o=a(36411),l=a(19778).Buffer;class d{constructor(e,t,a,n){this.transports=e,this.addr=t,this.credential=a,this.publicKey=n}signatureLength(){return 1280}address(){return this.addr}async data(){const e=await(0,i.pJ)(this.publicKey);console.log("jwk",e);const t=l.from(s.P6.parseBase64url(e.x.toString())),a=l.from(s.P6.parseBase64url(e.y.toString()));return r.defaultAbiCoder.encode(["uint256","uint256"],[n.O$.from(t),n.O$.from(a)])}shouldRemoveLeadingZero(e){return 0===e[0]&&0!==(128&e[1])}async sign(e){const t=s.P6.toBase64url((0,r.arrayify)(e)).replace(/=/g,"");console.log("challenge",t),console.log("create credential",this.credential);const a=s.P6.parseBase64url(t),l=await(0,o.YR)(a,this.credential.rawId,this.transports);console.log("get credential",l.credential);const d=(new TextDecoder).decode(s.P6.parseBase64url(s.P6.toBase64url(l.credential.clientDataJSON))),c=d.indexOf(t),u=d.substring(0,c),h=d.substring(c+t.length),g=new Uint8Array(l.credential.authenticatorData),p=(0,i.bL)(l.credential.signature);let x=p.r,b=p.s;this.shouldRemoveLeadingZero(x)&&(x=x.slice(1)),this.shouldRemoveLeadingZero(b)&&(b=b.slice(1));const f=r.defaultAbiCoder.encode(["uint256","uint256"],[n.O$.from(x),n.O$.from(b)]);return console.log(f,g,u,h),r.defaultAbiCoder.encode(["bytes","bytes","string","string"],[f,g,u,h])}}},46601:()=>{},89214:()=>{},8623:()=>{},7748:()=>{},85568:()=>{},56619:()=>{},83736:()=>{},77108:()=>{},52361:()=>{},94616:()=>{}}]);
//# sourceMappingURL=615.caecd517.chunk.js.map